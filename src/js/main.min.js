var draw=function(){function t(t,e){function n(t,e){return Math.random()>.5?-1:1}function o(){var o=[];"undefined"==typeof e&&(e=t,t=0);for(var i=t;e>=i;i++)o.push(i);return o.sort(n)}return o()}var e={online:{data:[],random:[],pCount:0},offline:{data:[],random:[],pCount:0}},n=function(){var t=4;$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getCheckinListIn2016&sportid="+t,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){t.forEach(function(t,n){"0"==t.realtime?e.offline.data.push(t.user):e.online.data.push(t.user)}),o()})},o=function(){console.log("用户列表数据初始化完毕"),0!=e.online.data.length&&(e.online.random=t(e.online.data.length-1),e.offline.random=t(e.offline.data.length-1),e.online.pCount=0,e.offline.pCount=0)},i=function(t,n){if(0!=e.online.data.length){for(var i,s=[],a=e.online.pCount,l=!1,r=a;a+t>r;r++)i=r,e.online.pCount++,e.online.pCount>=e.online.random.length&&(e.online.pCount=0,l=!0),r>=e.online.random.length&&(i=r-e.online.random.length),s.push(e.online.data[e.online.random[i]]);for(a=e.offline.pCount,r=a;a+n>r;r++)i=r,e.offline.pCount++,e.offline.pCount>=e.offline.random.length&&(e.offline.pCount=0,l=!0),r>=e.offline.random.length&&(i=r-e.offline.random.length),s.push(e.offline.data[e.offline.random[r]]);return l&&o(),s}};return{init:n,reset:o,lottery:i}}(),app=function(){var t,e,n,o=[],i=23,s=(function(){for(var t=0;10>t;t++){o[t]=[];for(var e=0;(8>t?17:6)>e;e++)o[t].push(!1)}}(),{template:"#el-question",props:["question","type","src"]}),a=function(t,e){var n=questionList[t][e],o={question:n.question,answer:n.answer};return"undefined"!=typeof n.type&&(f.questionType=n.type,f.src=n.src),o},l={template:"#el-questionlist",props:["classlist","namelist"],methods:{selectQuestion:function(t){f.classlist[t]=!0,this.$message("选择了第"+t+"题");var e=a(f.typeID,t);f.question={title:e.question,answer:e.answer,shorter:e.question.length>i,shorterAnswer:e.answer.length>i-4,curID:0,showAnswer:!1,time:""},f.on=!f.on,f.isDraw=!1}}},r={template:"#el-mask",props:["type","showmask","src"],methods:{hideMask:function(){f.showMask=!1,f.questionType==u.VIDEO&&t.pause()}}},u={NONE:-1,IMG:0,AUDIO:1,VIDEO:2},p=["必答题 第一轮","必答题 第二轮","抢答题 第一轮","抢答题  第二轮","风险题(10分)","风险题(20分)","风险题(30分)","支部书记答题","观众答题","附加题"],f=new Vue({el:"#app",components:{"el-question":s,"el-questionlist":l,"el-mask":r},data:{on:!0,isDraw:!1,typeID:0,type:p[0],question:{},questionType:u.NONE,src:"",showMask:!1,classlist:o[0],nameList:[],luckyList:[],classOptions:[{label:"必答题",options:[{value:0,label:"第一轮"},{value:1,label:"第二轮"}]},{label:"抢答题",options:[{value:2,label:"第一轮"},{value:3,label:"第二轮"}]},{label:"风险题",options:[{value:4,label:"风险题 - 10分"},{value:5,label:"风险题 - 20分"},{value:6,label:"风险题 - 30分"}]},{label:"其它",options:[{value:7,label:"支部书记答题"},{value:8,label:"观众答题"},{value:9,label:"附加题"}]}]},watch:{typeID:function(){if(this.type=p[this.typeID],this.classlist=o[this.typeID],this.on||this.goback(),this.nameList=[],7==this.typeID)for(var t=0;17>t;t++)this.nameList.push(questionList[7][t].user)}},methods:{showAnswer:function(){this.on||(this.question.showAnswer=!0),e&&clearInterval(e)},lightoff:function(){f.questionType!=u.NONE&&(this.showMask=!0,this.questionType=f.questionType,f.questionType==u.VIDEO&&f.$nextTick(function(){if(flvjs.isSupported()){var e=document.getElementById("videoElement");t=flvjs.createPlayer({type:"flv",cors:!0,url:f.src}),t.attachMediaElement(e),t.load(),t.play()}}))},goback:function(){this.question.showAnswer=!1,this.on=!0,this.questionType=u.NONE,e&&clearInterval(e),this.isDraw=!1,this.type=p[this.typeID]},timing:function(){if(!this.on){e&&clearInterval(e),this.question.time=5==this.typeID||6==this.typeID?10*this.typeID-30:10,this.question.showAnswer=!1;var t=this;e=setInterval(function(){t.question.time--,0===t.question.time&&(t.question.time="时间到",clearInterval(e))},1e3)}},startLottery:function(){this.type="中奖人信息",this.isDraw=!0},stopLottery:function(){"undefined"!=typeof n&&clearInterval(n)},lottery:function(t){this.isDraw=!0,f.luckyList=[],f.stopLottery(),n=setInterval(function(){f.luckyList=draw.lottery(3,5==t?2:0)},100)}}});return{vm:f}}();$(function(){$(".content").height($(document).height()),draw.init()});
//# sourceMappingURL=main.min.js.map